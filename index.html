<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Your Knowledge</title>
    <link rel="stylesheet" href="/MfIgame/static/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2"></script>
</head>
<body>
    <div id="course-setup" class="course-setup-container">
        <h2>Setup Course Session</h2>
        <form id="course-form" onsubmit="generateLink(event)">
            <label for="course-code">Course Code:</label>
            <input type="text" id="course-code" name="course-code" required>
            <label for="session-number">Session Number:</label>
            <input type="number" id="session-number" name="session-number" min="1" max="4" required>
            <button type="submit">Generate Session Link</button>
        </form>
        <div id="session-link" class="link-container" style="display: none;">
            <p>Share this link with learners:</p>
            <div class="link-box">
                <span id="link-output"></span>
                <button id="copy-link" title="Copy Link">ðŸ“‹</button>
            </div>
        </div>
    </div>

    <header class="header-container">
        <h1 id="main-title">Test Your Knowledge of the Model for Improvement!</h1>
        <p id="course-title" class="hidden"></p>
        <img src="/MfIgame/static/images/QICLearn_logo.jpg" alt="QIC Learn Logo" class="logo" />
    </header>

    <div id="backroom" class="course-setup-container">
        <h1>Course Organizer Backroom</h1>
        <form id="backroom-course-form" onsubmit="setCourse(event)">
            <label for="course-name">Course Name:</label>
            <input type="text" id="course-name" placeholder="Enter course name" required>
            <button type="submit">Set Course</button>
        </form>
        <div id="selected-course" class="hidden">
            <h2>Selected Course: <span id="current-course"></span></h2>
            <div id="session-options" class="hidden">
                <label for="session-number">Session:</label>
                <select id="session-number">
                    <option value="1">Session 1</option>
                    <option value="2">Session 2</option>
                    <option value="3">Session 3</option>
                    <option value="4">Session 4</option>
                </select>
                <button onclick="generateLink()">Generate Link</button>
                <div id="generated-link" class="hidden">
                    <p>Generated Link:</p>
                    <span id="link-output"></span>
                    <button onclick="copyLink()">Copy Link</button>
                </div>
            </div>
        </div>
        <div id="submission-tally-container" class="hidden">
            <h3>Live Submission Tally</h3>
            <ul id="submission-tally-list"></ul>
        </div>
        <div id="stats-view-container" class="hidden">
            <h3>View Statistics</h3>
            <label for="stats-session-select">Select Session:</label>
            <select id="stats-session-select" onchange="viewStats()">
                <option value="all">All Sessions</option>
                <option value="1">Session 1</option>
                <option value="2">Session 2</option>
                <option value="3">Session 3</option>
                <option value="4">Session 4</option>
            </select>
            <div id="stats-display"></div>
        </div>
    </div>
    <div id="stats-tally" class="tab-content hidden">
        <h2>Submission Tally</h2>
        <div id="submission-tally"></div>
    </div>
    <div id="stats-container"></div>
    <script src="/MfIgame/static/script.js" defer></script>
</body>
</html>
